// protoc -I proto/ proto/rpc.proto --go_out=plugins=grpc:proto

syntax = "proto3";

package proto;

service Rpc {
    // 推送接口
	rpc BPush(BPushMsg) 		returns (RetBPushMsg) 	{}
    rpc SPush(SPushMsg) 		returns (RetSPushMsg) 	{}
    rpc PChat(PChatMsg) 		returns (RetPChatMsg) 	{}
    rpc GChat(GChatMsg) 		returns (RetGChatMsg) 	{}

    // 用户相关接口
    rpc Login (LoginMsg)          returns (RetLoginMsg) 	{}
    rpc Logout(LogoutMsg)          returns (RetLogoutMsg) 	{}

    // 用户订阅相关
    rpc Subscribe (SubMsg)         returns (RetSubMsg) 	{}
    rpc UnSubscribe (UnSubMsg)       returns (RetUnSubMsg) 	{}
}


// 广播
message BPushMsg {

}

// 单播
message SPushMsg {
    repeated    bytes  tt = 1;        // to topic列表
    repeated    bytes  tu = 2;        // to user列表
}

// 私聊
message PChatMsg {

}

// 群播
message GChatMsg {

}

// 登陆消息
message LoginMsg {
    bytes  an      = 1;      //账户名
    bytes  un      = 2;      //子用户名
    int64   cid     = 3;      //链接id
    bytes  gip     = 4;      //gateway ip地址
}

// 登出消息
message LogoutMsg {
    bytes  an      = 1;      //账户名
    bytes  un      = 2;      //子用户名
}

// 订阅主题消息
message SubMsg {

}

// 取消订阅主题消息
message UnSubMsg {

}

// 广播返回消息
message RetBPushMsg {
    bytes msg = 1;
}

// 单播返回消息
message RetSPushMsg {
    bytes msg = 1;
}

// 私聊返回消息
message RetPChatMsg {
    bytes msg = 1;
}


// 群播返回消息 
message RetGChatMsg {
    bytes msg = 1;
}

// 登陆消息返回消息
message RetLoginMsg {
    bytes msg = 1;
}

// 登出消息返回消息
message RetLogoutMsg {
    bytes msg = 1;
}

// 订阅主题消息返回消息
message RetSubMsg {
    bytes msg = 1;
}

// 取消订阅主题消息返回消息
message RetUnSubMsg {
    bytes msg = 1;
}
