// protoc -I proto/ proto/rpc.proto --go_out=plugins=grpc:proto

syntax = "proto3";

package proto;

service Rpc {
    // 推送接口
	rpc BPush(BPushMsg) 		returns (Reply) 	{}
    rpc SPush(SPushMsg) 		returns (Reply) 	{}
    rpc PChat(PChatMsg) 		returns (Reply) 	{}
    rpc GChat(GChatMsg) 		returns (Reply) 	{}

    // 用户相关接口
    rpc Login (LoginMsg)          returns (Reply) 	{}
    rpc Logout(LogoutMsg)          returns (Reply) 	{}

    // 用户订阅相关
    rpc Subscribe (SubMsg)         returns (Reply) 	{}
    rpc UnSubscribe (UnSubMsg)       returns (Reply) 	{}
}


// 广播
message BPushMsg {

}

// 单播
message SPushMsg {
    repeated    bytes  tt = 1;        // to topic列表
    repeated    bytes  tu = 2;        // to user列表
}

// 私聊
message PChatMsg {

}

// 群播
message GChatMsg {

}

// 登陆消息
message LoginMsg {
    bytes  an      = 1;      //账户名
    bytes  un      = 2;      //子用户名
    int64   cid     = 3;      //链接id
    bytes  gip     = 4;      //gateway ip地址
}

// 登出消息
message LogoutMsg {
    bytes  an      = 1;      //账户名
    bytes  un      = 2;      //子用户名
}

// 订阅主题消息
message SubMsg {

}

// 取消订阅主题消息
message UnSubMsg {

}

message Reply {
    bytes  msg    = 1;    //其他数据
}